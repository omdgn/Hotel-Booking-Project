import{a as A,b as $,c as B,d as L}from"./chunk-TJF4DHAN.js";import{a as G}from"./chunk-K23T45BH.js";import{$ as o,A as v,B as y,C as g,D as x,I,J as a,K as f,O as d,P as m,R as E,S as i,T as n,U as h,V as b,W as _,X as c,_ as F,a as C,aa as S,b as w,ba as p,ca as k,ea as P,ga as O,ja as T,ka as R,la as D,sa as H,ua as V,w as M,xa as j}from"./chunk-47E5XFJY.js";function z(t,l){t&1&&(i(0,"div",29),h(1,"div",30),n())}function U(t,l){if(t&1){let e=b();i(0,"map-marker",40),_("mapClick",function(){let r=v(e).$implicit,u=c(2);return y(u.onMarkerClick(r))}),n()}if(t&2){let e=l.$implicit,s=c(2);m("position",e.position)("options",s.markerOptions)("title",e.hotel.name+" - \u20BA"+e.hotel.price)}}function Y(t,l){if(t&1&&(i(0,"div",31)(1,"h3",32),o(2,"Harita G\xF6r\xFCn\xFCm\xFC"),n(),i(3,"div",33)(4,"google-map",34),d(5,U,1,3,"map-marker",35),n(),i(6,"div",36)(7,"div",37),h(8,"div",38),i(9,"span",39),o(10),n()()()()()),t&2){let e=c();a(4),m("options",e.mapOptions)("width","100%")("height","100%"),a(),m("ngForOf",e.hotelMarkers),a(5),p("",e.hotels.length," Otel")}}function N(t,l){t&1&&(i(0,"div",43),g(),i(1,"svg",44),h(2,"path",45),n(),x(),i(3,"h3",46),o(4,"Arama kriterlerinize uygun otel bulunamad\u0131"),n(),i(5,"p",47),o(6,"Farkl\u0131 tarih veya \u015Fehir se\xE7erek tekrar deneyin"),n()())}function q(t,l){if(t&1&&(i(0,"div",71)(1,"span",72),o(2),n()()),t&2){let e=c().$implicit;a(2),p(" %",e.discount.percentage," \u0130ndirim ")}}function J(t,l){if(t&1&&(i(0,"span",73),o(1," \u2605 "),n()),t&2){let e=l.$implicit;E("text-gray-300",e===0)}}function K(t,l){if(t&1&&(i(0,"span",74),o(1),n()),t&2){let e=l.$implicit;a(),p(" ",e," ")}}function Q(t,l){if(t&1&&(i(0,"span",74),o(1),n()),t&2){let e=c().$implicit;a(),p(" +",e.amenities.length-3," di\u011Fer ")}}function W(t,l){if(t&1&&(i(0,"div",78)(1,"span",79),o(2),n(),i(3,"span",80),o(4),n()()),t&2){let e=c(2).$implicit;a(2),p("\u20BA",e.price,""),a(2),p("\u20BA",e.discount.originalPrice,"")}}function X(t,l){if(t&1&&(i(0,"span",79),o(1),n()),t&2){let e=c(2).$implicit;a(),p("\u20BA",e.price,"")}}function Z(t,l){if(t&1&&(i(0,"div"),d(1,W,5,2,"div",75)(2,X,2,1,"span",76),i(3,"span",77),o(4,"gecelik"),n()()),t&2){let e=c().$implicit;a(),m("ngIf",e.discount),a(),m("ngIf",!e.discount)}}function ee(t,l){t&1&&(i(0,"span",81),o(1,"\xDCye fiyat\u0131 i\xE7in giri\u015F yap\u0131n"),n())}function te(t,l){if(t&1){let e=b();i(0,"div",50),_("click",function(){let r=v(e).$implicit,u=c(3);return y(u.onHotelClick(r.id))}),i(1,"div",51),h(2,"img",52),d(3,q,3,1,"div",53),i(4,"button",54),g(),i(5,"svg",55),h(6,"path",56),n()()(),x(),i(7,"div",57)(8,"div",58)(9,"h3",59),o(10),n(),i(11,"p",14),o(12),n()(),i(13,"div",60)(14,"div",61),d(15,J,2,2,"span",62),n(),i(16,"span",63),o(17),n()(),i(18,"div",64)(19,"div",65),d(20,K,2,1,"span",66)(21,Q,2,1,"span",67),n()(),i(22,"div",68)(23,"div"),d(24,Z,5,2,"div",69)(25,ee,2,0,"ng-template",null,0,O),n(),i(27,"button",70),o(28," Detaylar\u0131 G\xF6r "),n()()()()}if(t&2){let e=l.$implicit,s=F(26),r=c(3);a(2),m("src",e.imageUrl,I)("alt",e.name),a(),m("ngIf",e.discount),a(7),S(e.name),a(2),k("",e.city,", ",e.country,""),a(3),m("ngForOf",r.getStarArray(e.rating)),a(2),k(" ",e.rating,"/5 (",e.commentCount," yorum) "),a(3),m("ngForOf",e.amenities.slice(0,3)),a(),m("ngIf",e.amenities.length>3),a(3),m("ngIf",r.currentUser)("ngIfElse",s)}}function ie(t,l){if(t&1&&(i(0,"div",48),d(1,te,29,13,"div",49),n()),t&2){let e=c(2);a(),m("ngForOf",e.hotels)}}function ne(t,l){if(t&1&&(i(0,"div"),d(1,N,7,0,"div",41)(2,ie,2,1,"div",42),n()),t&2){let e=c();a(),m("ngIf",e.hotels.length===0),a(),m("ngIf",e.hotels.length>0)}}var ue=(()=>{class t{constructor(e,s,r,u){this.authService=e,this.hotelService=s,this.route=r,this.router=u,this.currentUser=null,this.hotels=[],this.loading=!1,this.showMapView=!1,this.searchParams={},this.mapOptions={center:{lat:39.9334,lng:32.8597},zoom:6,mapTypeId:google.maps.MapTypeId.ROADMAP,styles:[{featureType:"poi",elementType:"labels",stylers:[{visibility:"off"}]}]},this.markerOptions={draggable:!1},this.hotelMarkers=[]}ngOnInit(){this.authService.currentUser$.subscribe(e=>{this.currentUser=e}),this.route.queryParams.subscribe(e=>{this.searchParams=e,this.searchHotels()})}searchHotels(){if(this.loading=!0,this.searchParams.checkInDate&&this.searchParams.checkOutDate){let e={city:this.searchParams.city||void 0,startDate:this.searchParams.checkInDate,endDate:this.searchParams.checkOutDate,guestNumber:this.searchParams.guestCount?parseInt(this.searchParams.guestCount):void 0};this.hotelService.searchHotels(e).subscribe(s=>{this.hotels=s.sort((r,u)=>u.rating-r.rating),this.updateMapMarkers(),this.loading=!1})}else this.searchParams.city?this.hotelService.getHotelsByCity(this.searchParams.city).subscribe(e=>{this.hotels=e.sort((s,r)=>r.rating-s.rating),this.updateMapMarkers(),this.loading=!1}):this.currentUser?.country?this.hotelService.getHotelsByCountry(this.currentUser.country).subscribe(e=>{this.hotels=e.sort((s,r)=>r.rating-s.rating),this.updateMapMarkers(),this.loading=!1}):this.hotelService.getAllHotels().subscribe(e=>{this.hotels=e.sort((s,r)=>r.rating-s.rating),this.updateMapMarkers(),this.loading=!1})}updateMapMarkers(){if(this.hotelMarkers=this.hotels.map(e=>({position:{lat:e.coordinates.lat,lng:e.coordinates.lng},hotel:e})),this.hotels.length>0){let e=this.hotels[0];this.mapOptions=w(C({},this.mapOptions),{center:{lat:e.coordinates.lat,lng:e.coordinates.lng},zoom:10})}}onMarkerClick(e){this.onHotelClick(e.hotel.id)}toggleMapView(){this.showMapView=!this.showMapView}goBackToSearch(){this.router.navigate(["/"])}onHotelClick(e){this.router.navigate(["/hotel",e])}getFormattedSearchSummary(){let e=[];if(this.searchParams.city&&e.push(this.searchParams.city),this.searchParams.checkInDate&&this.searchParams.checkOutDate){let s=new Date(this.searchParams.checkInDate).toLocaleDateString("tr-TR"),r=new Date(this.searchParams.checkOutDate).toLocaleDateString("tr-TR");e.push(`${s} - ${r}`)}return this.searchParams.guestCount&&e.push(`${this.searchParams.guestCount} Misafir`),e.length>0?e.join(" \u2022 "):"T\xFCm Oteller"}getStarArray(e){return Array(5).fill(0).map((s,r)=>r<Math.floor(e)?1:0)}static{this.\u0275fac=function(s){return new(s||t)(f(G),f(L),f(H),f(V))}}static{this.\u0275cmp=M({type:t,selectors:[["app-search-results"]],standalone:!0,features:[P],decls:38,vars:6,consts:[["unauthenticatedPrice",""],[1,"min-h-screen","bg-gray-50"],[1,"bg-white","shadow-sm","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8"],[1,"flex","justify-between","items-center","h-16"],[1,"flex","items-center","text-blue-600","hover:text-blue-800","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 19l-7-7 7-7"],[1,"text-xl","font-semibold","text-gray-900"],[1,"w-32"],[1,"bg-white","border-b"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-4"],[1,"flex","flex-col","sm:flex-row","sm:items-center","justify-between","gap-4"],[1,"text-lg","font-medium","text-gray-900"],[1,"text-sm","text-gray-600"],[1,"flex","items-center","gap-3"],[1,"px-3","py-2","border","border-gray-300","rounded-lg","text-sm","bg-white","focus:outline-none","focus:ring-2","focus:ring-blue-500"],["value","rating"],["value","price-low"],["value","price-high"],["value","name"],[1,"flex","items-center","px-4","py-2","border","border-gray-300","rounded-lg","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","transition-colors",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","mr-2"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M15 11a3 3 0 11-6 0 3 3 0 016 0z"],[1,"max-w-7xl","mx-auto","px-4","sm:px-6","lg:px-8","py-6"],["class","flex justify-center items-center py-12",4,"ngIf"],["class","bg-white rounded-lg shadow-sm p-6 mb-6",4,"ngIf"],[4,"ngIf"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-blue-600"],[1,"bg-white","rounded-lg","shadow-sm","p-6","mb-6"],[1,"text-lg","font-semibold","text-gray-900","mb-4"],[1,"relative","h-96","rounded-lg","overflow-hidden","map-container"],[3,"options","width","height"],[3,"position","options","title","mapClick",4,"ngFor","ngForOf"],[1,"absolute","bottom-4","left-4","bg-white","rounded-lg","shadow-lg","p-3"],[1,"flex","items-center","space-x-2"],[1,"w-4","h-4","bg-red-500","rounded-full"],[1,"text-sm","text-gray-700"],[3,"mapClick","position","options","title"],["class","text-center py-12",4,"ngIf"],["class","grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",4,"ngIf"],[1,"text-center","py-12"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"mx-auto","h-12","w-12","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-6"],["class","bg-white rounded-lg shadow-sm hover:shadow-lg transition-all duration-300 cursor-pointer border border-gray-200 overflow-hidden transform hover:-translate-y-1",3,"click",4,"ngFor","ngForOf"],[1,"bg-white","rounded-lg","shadow-sm","hover:shadow-lg","transition-all","duration-300","cursor-pointer","border","border-gray-200","overflow-hidden","transform","hover:-translate-y-1",3,"click"],[1,"relative","h-48","overflow-hidden"],[1,"w-full","h-full","object-cover","hover:scale-110","transition-transform","duration-500",3,"src","alt"],["class","absolute top-3 left-3",4,"ngIf"],[1,"absolute","top-3","right-3","p-2","bg-white","bg-opacity-80","hover:bg-opacity-100","rounded-full","transition-all"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-5","h-5","text-gray-600","hover:text-red-500"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"],[1,"p-4"],[1,"mb-3"],[1,"font-semibold","text-lg","text-gray-900","mb-1"],[1,"flex","items-center","mb-3"],[1,"flex","items-center"],["class","text-yellow-400",3,"text-gray-300",4,"ngFor","ngForOf"],[1,"ml-2","text-sm","text-gray-600"],[1,"mb-4"],[1,"flex","flex-wrap","gap-1"],["class","inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",4,"ngFor","ngForOf"],["class","inline-block bg-gray-100 text-gray-700 px-2 py-1 rounded-full text-xs",4,"ngIf"],[1,"flex","items-center","justify-between"],[4,"ngIf","ngIfElse"],[1,"bg-blue-600","hover:bg-blue-700","text-white","px-4","py-2","rounded-lg","text-sm","font-medium","transition-colors"],[1,"absolute","top-3","left-3"],[1,"bg-red-500","text-white","px-3","py-1","rounded-full","text-sm","font-semibold","shadow-lg"],[1,"text-yellow-400"],[1,"inline-block","bg-gray-100","text-gray-700","px-2","py-1","rounded-full","text-xs"],["class","flex items-center gap-2",4,"ngIf"],["class","text-lg font-bold text-gray-900",4,"ngIf"],[1,"text-sm","text-gray-600","block"],[1,"flex","items-center","gap-2"],[1,"text-lg","font-bold","text-gray-900"],[1,"text-sm","text-gray-500","line-through"],[1,"text-sm","text-blue-600","font-medium"]],template:function(s,r){s&1&&(i(0,"div",1)(1,"header",2)(2,"div",3)(3,"div",4)(4,"button",5),_("click",function(){return r.goBackToSearch()}),g(),i(5,"svg",6),h(6,"path",7),n(),o(7," Arama Sayfas\u0131na D\xF6n "),n(),x(),i(8,"h1",8),o(9,"Arama Sonu\xE7lar\u0131"),n(),h(10,"div",9),n()()(),i(11,"div",10)(12,"div",11)(13,"div",12)(14,"div")(15,"h2",13),o(16),n(),i(17,"p",14),o(18),n()(),i(19,"div",15)(20,"select",16)(21,"option",17),o(22,"Puana G\xF6re"),n(),i(23,"option",18),o(24,"Fiyat: D\xFC\u015F\xFCkten Y\xFCkse\u011Fe"),n(),i(25,"option",19),o(26,"Fiyat: Y\xFCksekten D\xFC\u015F\xFC\u011Fe"),n(),i(27,"option",20),o(28,"\u0130sme G\xF6re"),n()(),i(29,"button",21),_("click",function(){return r.toggleMapView()}),g(),i(30,"svg",22),h(31,"path",23)(32,"path",24),n(),o(33),n()()()()(),x(),i(34,"main",25),d(35,z,2,0,"div",26)(36,Y,11,5,"div",27)(37,ne,3,2,"div",28),n()()),s&2&&(a(16),S(r.getFormattedSearchSummary()),a(2),p("",r.hotels.length," otel bulundu"),a(15),p(" ",r.showMapView?"Liste G\xF6r\xFCn\xFCm\xFC":"Haritada G\xF6ster"," "),a(2),m("ngIf",r.loading),a(),m("ngIf",r.showMapView&&!r.loading),a(),m("ngIf",!r.showMapView&&!r.loading))},dependencies:[D,T,R,j,B,A,$],styles:[".hotel-card-enter[_ngcontent-%COMP%]{opacity:0;transform:translateY(20px)}.hotel-card-enter-active[_ngcontent-%COMP%]{opacity:1;transform:translateY(0);transition:opacity .3s ease-in,transform .3s ease-in}.search-results-container[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_fadeIn .3s ease-in}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}.map-marker[_ngcontent-%COMP%]{transition:transform .2s ease-in-out}.map-marker[_ngcontent-%COMP%]:hover{transform:scale(1.1);z-index:10}.map-marker[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]{pointer-events:none;transition:opacity .2s ease-in-out}.map-marker[_ngcontent-%COMP%]:hover   .popup[_ngcontent-%COMP%]{opacity:1!important;pointer-events:auto}.map-container[_ngcontent-%COMP%]{border-radius:.5rem;overflow:hidden;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}google-map[_ngcontent-%COMP%]{border-radius:.5rem}@media (max-width: 640px){.search-summary[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.view-toggle[_ngcontent-%COMP%]{align-self:flex-end}.map-marker[_ngcontent-%COMP%]   .popup[_ngcontent-%COMP%]{min-width:12rem}}"]})}}return t})();export{ue as SearchResultsComponent};
